<ng-controller ng-controller="AmmaUserFormMainController as ammaUserFormMainController"><md-tab md-on-select="ammaUserFormMainController.loadModel()"><md-tab-label>Main</md-tab-label><md-tab-body><md-content class="md-padding"><form name="ammaUserMainForm" novalidate="" ng-submit="$event.preventDefault()" flex="66"><div class="md-dialog-content" layout="column" flex=""><section layout="column" flex=""><div layout="row" flex=""><md-input-container flex=""><label>First name</label><input type="text" ng-model="ammaUserFormMainController.model.firstName" name="firstName" required=""/><div ng-messages="ammaUserMainForm.firstName.$error" md-auto-hide="false" ng-show="ammaUserMainForm.firstName.$touched"><div ng-message="required">Please enter your first name</div></div></md-input-container><md-input-container flex=""><label>Middle name</label><input type="text" ng-model="ammaUserFormMainController.model.middleName" name="middleName"/></md-input-container><md-input-container flex=""><label>Last name</label><input type="text" ng-model="ammaUserFormMainController.model.lastName" name="lastName" required=""/><div ng-messages="ammaUserMainForm.lastName.$error" md-auto-hide="false" ng-show="ammaUserMainForm.lastName.$touched"><div ng-message="required">Please enter your last name</div></div></md-input-container></div><div layout="row" flex=""><md-input-container flex=""><label>Username</label><input type="text" ng-model="ammaUserFormMainController.model._id" name="username" required="" ng-disabled="!!ammaUserFormMainController.id"/><div ng-messages="ammaUserMainForm.username.$error" md-auto-hide="false" ng-show="ammaUserMainForm.username.$touched"><div ng-message="required">Please enter your username</div></div></md-input-container><md-input-container flex=""><label>Email</label><input type="email" ng-model="ammaUserFormMainController.model.email" name="email" required=""/><div ng-messages="ammaUserMainForm.email.$error" md-auto-hide="false" ng-show="ammaUserMainForm.email.$touched"><div ng-message="required">Please enter your email</div></div></md-input-container><md-input-container flex=""><label>Contact Number</label><input type="text" ng-model="ammaUserFormMainController.model.contactNumber" name="contactNumber" required=""/><div ng-messages="ammaUserMainForm.contactNumber.$error" md-auto-hide="false" ng-show="ammaUserMainForm.contactNumber.$touched"><div ng-message="required">Please enter your contact number</div></div></md-input-container></div><div layout="row" flex="" ng-if="!ammaUserFormMainController.id"><md-input-container flex=""><label>Password</label><input type="password" ng-model="ammaUserFormMainController.model.password" name="password" required=""/><div ng-messages="ammaUserMainForm.password.$error" md-auto-hide="false" ng-show="ammaUserMainForm.password.$touched"><div ng-message="required">Please enter your password</div></div></md-input-container><md-input-container flex=""><label>Re-enter Password</label><input type="password" ng-model="ammaUserFormMainController.model.internal.rePassword" name="rePassword" required="" match-password="password"/><div ng-messages="ammaUserMainForm.rePassword.$error" md-auto-hide="false" ng-show="ammaUserMainForm.rePassword.$touched"><div ng-message="required">Please re-enter your password</div><div ng-message="passwordMatch">Password did not match</div></div></md-input-container></div><div layout="row" flex=""><md-input-container flex=""><label>Gender</label><md-select ng-model="ammaUserFormMainController.model.gender" name="gender" required=""><md-option value="male">Male</md-option><md-option value="female">Female</md-option><md-option value="other">Other</md-option></md-select><div ng-messages="ammaUserMainForm.gender.$error" md-auto-hide="false" ng-show="ammaUserMainForm.gender.$touched"><div ng-message="required">Please select gender</div></div></md-input-container><md-datepicker name="dob" ng-model="ammaUserFormMainController.model.dob" md-placeholder="Enter Dob" flex="" md-max-date="ammaUserFormMainController.maxDob"></md-datepicker></div><div layout="row" flex=""><md-input-container flex=""><label>Store</label><md-select ng-model="ammaUserFormMainController.model.available.store.name" name="store" required=""><md-option value=""></md-option><md-option ng-repeat="store in ammaUserFormMainController.stores" ng-value="store._id">{{store.title}}</md-option></md-select><div ng-messages="ammaUserMainForm.store.$error" md-auto-hide="false" ng-show="ammaUserMainForm.store.$touched"><div ng-message="required">Please select store</div></div><div flex="flex"><md-checkbox ng-model="ammaUserFormMainController.model.available.store.availableToChildren" aria-label="" ng-true-value="true" ng-false-value="false"></md-checkbox>Is Available to sub stores?</div></md-input-container><md-input-container flex=""><label>User Group</label><md-select ng-model="ammaUserFormMainController.model.userGroup" name="userGroup" required=""><md-option value=""></md-option><md-option ng-repeat="userGroup in ammaUserFormMainController.userGroups" ng-value="userGroup._id" required="required">{{userGroup.title}}</md-option></md-select><div ng-messages="ammaUserMainForm.userGroup.$error" md-auto-hide="false" ng-show="ammaUserMainForm.userGroup.$touched"><div ng-message="required">Please select a user group</div></div></md-input-container></div><div layout="row"><div layout="row" flex="50"><md-checkbox ng-model="ammaUserFormMainController.model.isActive" aria-label="" ng-true-value="true" ng-false-value="false"></md-checkbox>Is Active?</div></div></section><section><h2>Upload Profile Pic</h2><md-button class="md-primary md-raised" ngf-select="" ng-model="ammaUserFormMainController.profile.files" amma-file-token="ammaUserFormMainController.model.profilePicToken" amma-file-type="{{ammaUserFormMainController.imageType}}" amma-file="ammaUserFormMainController.profile.all" amma-file-busy="ammaUserFormMainController.profile.isBusy" ng-show="!ammaUserFormMainController.profile.isBusy" amma-file-remove-func="ammaUserFormMainController.profile.removeFunc" amma-file-validator="true">Select avatar</md-button><md-progress-linear md-mode="indeterminate" ng-show="ammaUserFormMainController.profile.isBusy"></md-progress-linear><md-grid-list flex="flex" md-cols="9" md-cols-xs="9" md-row-height="4:3" md-gutter="10px" ng-if="ammaUserFormMainController.profile.all.length"><md-grid-tile md-rowspan="1" md-colspan="1" ng-repeat="file in ammaUserFormMainController.profile.all" ng-style="::{ 'background-image': 'url(' + file.url + ')', 'background-size' : 'cover', 'cursor':'pointer' }" layout-padding="10"><div class="img-wrap"><md-button class="md-icon-button md-warn md-img-remove" ng-click="ammaUserFormMainController.profile.removeFunc(file.filename, $event)"><md-icon md-font-icon="zmdi zmdi-close-circle"></md-icon></md-button></div></md-grid-tile></md-grid-list></section><section flex="" layout="column"><h2>Address</h2><div flex="" layout="row"><md-input-container flex=""><label>Address Line 1</label><input type="text" ng-model="ammaUserFormMainController.model.address.addressLine1" name="addressLine1" required=""/><div ng-messages="ammaUserMainForm.addressLine1.$error" md-auto-hide="false" ng-show="ammaUserMainForm.addressLine1.$touched"><div ng-message="required">Please enter address Line 1</div></div></md-input-container><md-input-container flex=""><label>Address Line 2</label><input type="text" ng-model="ammaUserFormMainController.model.address.addressLine2" name="addressLine2"/><div ng-messages="ammaUserMainForm.addressLine2.$error" md-auto-hide="false" ng-show="ammaUserMainForm.addressLine2.$touched"><div ng-message="required">Please enter address Line 2</div></div></md-input-container></div><div flex="" layout="row"><md-input-container flex=""><label>Town/City</label><input type="text" ng-model="ammaUserFormMainController.model.address.town" name="town"/></md-input-container><md-input-container flex=""><label>County</label><input type="text" ng-model="ammaUserFormMainController.model.address.county" name="county"/></md-input-container></div><div flex="" layout="row"><md-input-container flex=""><label>Country</label><input type="text" ng-model="ammaUserFormMainController.model.address.country" name="country"/><div ng-messages="ammaUserMainForm.country.$error" md-auto-hide="false" ng-show="ammaUserMainForm.country.$touched"><div ng-message="required">Please enter Country</div></div></md-input-container><md-input-container flex=""><label>Postcode</label><input type="text" ng-model="ammaUserFormMainController.model.address.postcode" name="postcode"/><div ng-messages="ammaUserMainForm.postcode.$error" md-auto-hide="false" ng-show="ammaUserMainForm.postcode.$touched"><div ng-message="required">Please enter Postcode</div></div></md-input-container></div></section></div><div class="amma-dialog-actions"><md-button class="md-primary md-raised" ng-click="ammaUserFormMainController.submit($event)" ng-disabled="ammaUserMainForm.$invalid" md-autofocus="">Save</md-button><md-button class="md-accent md-raised" ng-click="ammaUserFormMainController.submit($event, true)" ng-disabled="ammaUserMainForm.$invalid" md-autofocus="">Save and close</md-button><md-button class="md-warn md-raised" ng-click="ammaUserFormMainController.hide($event)">Cancel</md-button></div></form></md-content></md-tab-body></md-tab></ng-controller>