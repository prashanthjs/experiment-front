<ng-controller ng-controller="AmmaProductFormMainController as ammaProductFormMainController"><md-tab md-on-select="ammaProductFormMainController.loadModel()"><md-tab-label>Main</md-tab-label><md-tab-body><md-content class="md-padding"><form name="ammaProductMainForm" novalidate="" ng-submit="$event.preventDefault()" flex="66"><div class="md-dialog-content" layout="column" flex=""><section layout="column" flex=""><div layout="row" flex=""><md-input-container flex=""><label>ID</label><input type="text" ng-model="ammaProductFormMainController.model._id" name="id" required="" ng-disabled="!!ammaProductFormMainController.id"/><div ng-messages="ammaProductMainForm.id.$error" md-auto-hide="false" ng-show="ammaProductMainForm.id.$touched"><div ng-message="required">Please enter id</div></div></md-input-container><md-input-container flex=""><label>Title</label><input type="text" ng-model="ammaProductFormMainController.model.title" name="title" required=""/><div ng-messages="ammaProductMainForm.title.$error" md-auto-hide="false" ng-show="ammaProductMainForm.title.$touched"><div ng-message="required">Please enter title</div></div></md-input-container></div><div layout="row" flex=""><md-input-container flex="50"><label>SKU</label><input type="text" ng-model="ammaProductFormMainController.model.sku" name="sku" required=""/><div ng-messages="ammaProductMainForm.sku.$error" md-auto-hide="false" ng-show="ammaProductMainForm.sku.$touched"><div ng-message="required">Please enter SKU</div></div></md-input-container></div><div layout="row" flex=""><md-input-container flex=""><label>Sell price</label><input type="number" ng-model="ammaProductFormMainController.model.price.sell" name="sellPrice" required="" min="0"/><div ng-messages="ammaProductMainForm.sellPrice.$error" md-auto-hide="false" ng-show="ammaProductMainForm.sellPrice.$touched"><div ng-message="required">Please enter sell price</div><div ng-message="min">Invalid sell price</div></div></md-input-container><md-input-container flex=""><label>Cost price</label><input type="number" ng-model="ammaProductFormMainController.model.price.cost" name="costPrice" min="0"/><div ng-messages="ammaProductMainForm.costPrice.$error" md-auto-hide="false" ng-show="ammaProductMainForm.costPrice.$touched"><div ng-message="min">Invalid cost price</div></div></md-input-container><md-input-container flex=""><label>List price</label><input type="number" ng-model="ammaProductFormMainController.model.price.list" name="listPrice" min="0"/><div ng-messages="ammaProductMainForm.listPrice.$error" md-auto-hide="false" ng-show="ammaProductMainForm.listPrice.$touched"><div ng-message="min">Invalid list price</div></div></md-input-container></div><div layout="row" flex=""><md-input-container flex=""><label>Categories</label><md-chips name="categories" md-autocomplete-snap="" ng-model="ammaProductFormMainController.model.categories" md-require-match="true" amma-cards-min-length="1"><md-autocomplete md-selected-item="categories_selectedItem" md-search-text="categories_searchText" md-items="item in categories_categorySearch(categories_searchText)" md-item-text="item" placeholder="Select categories" amma-category-search="categories_categorySearch"><span md-highlight-text="categories_searchText">{{item}}</span></md-autocomplete><md-chip-template><span>{{$chip._id || $chip}}</span></md-chip-template></md-chips><div ng-messages="ammaProductMainForm.categories.$error" md-auto-hide="false" ng-show="ammaProductMainForm.categories.$touched"><div ng-message="amma-cards-min-length">Please select a category</div></div></md-input-container><md-input-container flex=""><label>Features</label><md-chips name="features" ng-model="ammaProductFormMainController.model.features" md-require-match="true" md-autocomplete-snap=""><md-autocomplete md-selected-item="features_selectedItem" md-search-text="features_searchText" md-items="item in features_featureSearch(features_searchText)" md-item-text="item" placeholder="Select features" amma-feature-search="features_featureSearch"><span md-highlight-text="features_searchText">{{item}}</span></md-autocomplete><md-chip-template><span>{{$chip._id || $chip}}</span></md-chip-template></md-chips></md-input-container></div><div layout="row" flex=""><md-input-container flex=""><label>Tags</label><md-chips name="tags" ng-model="ammaProductFormMainController.model.tags" md-autocomplete-snap=""><md-autocomplete md-selected-item="tags_selectedItem" md-search-text="tags_searchText" md-items="item in tags_tagSearch(tags_searchText)" md-item-text="item" placeholder="Select tags" amma-tag-search="tags_tagSearch"><span md-highlight-text="tags_searchText">{{item}}</span></md-autocomplete><md-chip-template><span>{{$chip._id || $chip}}</span></md-chip-template></md-chips></md-input-container><md-input-container flex=""><md-switch class="md-primary" ng-model="ammaProductFormMainController.model.isActive" aria-label="Is Active?" flex="">Is Active?</md-switch></md-input-container></div></section><section><h3>Upload Images</h3><div layout="row" flex=""><md-button class="md-primary md-raised" ngf-select="" ng-model="ammaProductFormMainController.productToken.files" amma-file-token="ammaProductFormMainController.model.imageToken" amma-file-type="{{ammaProductFormMainController.imageType}}" amma-file="ammaProductFormMainController.productToken.all" amma-file-busy="ammaProductFormMainController.productToken.isBusy" ng-show="!ammaProductFormMainController.productToken.isBusy" amma-file-remove-func="ammaProductFormMainController.productToken.removeFunc" amma-file-validator="true">Select Images</md-button><md-progress-linear md-mode="indeterminate" ng-show="ammaProductFormMainController.productToken.isBusy"></md-progress-linear><md-grid-list flex="flex" md-cols="9" md-cols-xs="9" md-row-height="4:3" md-gutter="10px" ng-if="ammaProductFormMainController.productToken.all.length"><md-grid-tile md-rowspan="1" md-colspan="1" ng-repeat="file in ammaProductFormMainController.productToken.all" ng-style="::{ 'background-image': 'url(' + file.url + ')', 'background-size' : 'cover', 'cursor':'pointer' }" layout-padding="10"><div class="img-wrap"><md-button class="md-icon-button md-warn md-img-remove" ng-click="ammaProductFormMainController.productToken.removeFunc(file.filename, $event)"><md-icon md-font-icon="zmdi zmdi-close-circle"></md-icon></md-button></div></md-grid-tile></md-grid-list></div></section><section><h3>Inventory</h3><div layout="row" flex=""><md-input-container flex=""><label>In Stock</label><input type="number" ng-model="ammaProductFormMainController.model.inventory.stock" name="stock" required="" min="-1"/><div ng-messages="ammaProductMainForm.stock.$error" md-auto-hide="false" ng-show="ammaProductMainForm.stock.$touched"><div ng-message="required">Please enter stock</div><div ng-message="min">Invalid stock</div></div></md-input-container><md-input-container flex=""><label>Quantity step</label><input type="number" ng-model="ammaProductFormMainController.model.inventory.quantity.step" name="quantityStep" required="" min="1"/><div ng-messages="ammaProductMainForm.quantityStep.$error" md-auto-hide="false" ng-show="ammaProductMainForm.quantityStep.$touched"><div ng-message="required">Please enter quantity step</div><div ng-message="min">Invalid Quantity step</div></div></md-input-container></div><div layout="row" flex=""><md-input-container flex=""><label>Minimum quantity</label><input type="number" ng-model="ammaProductFormMainController.model.inventory.quantity.min" name="quantityMin" required="" min="1"/><div ng-messages="ammaProductMainForm.quantityMin.$error" md-auto-hide="false" ng-show="ammaProductMainForm.quantityMin.$touched"><div ng-message="required">Please enter minimum quantity</div><div ng-message="min">Invalid quantity</div></div></md-input-container><md-input-container flex=""><label>Maximum quantity</label><input type="number" ng-model="ammaProductFormMainController.model.inventory.quantity.max" name="quantityMax" required="" min="-1"/><div ng-messages="ammaProductMainForm.quantityStep.$error" md-auto-hide="false" ng-show="ammaProductMainForm.quantityStep.$touched"><div ng-message="required">Please enter maximum quantity</div><div ng-message="min">Invalid quantity</div></div></md-input-container></div></section><section><h3>Shipping</h3><div layout="row" flex=""><md-input-container flex=""><label>Weight</label><input type="number" ng-model="ammaProductFormMainController.model.shipping.weight" name="weight" required="" min="0"/><div ng-messages="ammaProductMainForm.weight.$error" md-auto-hide="false" ng-show="ammaProductMainForm.weight.$touched"><div ng-message="required">Please enter weight</div><div ng-message="min">Invalid weight</div></div></md-input-container><md-input-container flex=""><md-switch class="md-primary" ng-model="ammaProductFormMainController.model.shipping.freeShipping" aria-label="Is Free shipping?">Free Shipping?</md-switch></md-input-container></div><div layout="row" flex=""><md-input-container flex=""><label>Box length</label><input type="number" ng-model="ammaProductFormMainController.model.shipping.box.length" name="boxLength" required="" min="0"/><div ng-messages="ammaProductMainForm.boxLength.$error" md-auto-hide="false" ng-show="ammaProductMainForm.boxLength.$touched"><div ng-message="required">Please enter box length</div><div ng-message="min">Invalid box length</div></div></md-input-container><md-input-container flex=""><label>Box width</label><input type="number" ng-model="ammaProductFormMainController.model.shipping.box.width" name="boxWidth" required="" min="0"/><div ng-messages="ammaProductMainForm.boxWidth.$error" md-auto-hide="false" ng-show="ammaProductMainForm.boxWidth.$touched"><div ng-message="required">Please enter box width</div><div ng-message="min">Invalid box width</div></div></md-input-container><md-input-container flex=""><label>Box height</label><input type="number" ng-model="ammaProductFormMainController.model.shipping.box.height" name="boxHeight" required="" min="0"/><div ng-messages="ammaProductMainForm.boxHeight.$error" md-auto-hide="false" ng-show="ammaProductMainForm.boxHeight.$touched"><div ng-message="required">Please enter box height</div><div ng-message="min">Invalid box height</div></div></md-input-container></div></section><section><h3>Available</h3><div layout="row" flex=""><md-autocomplete md-selected-item="ammaProductFormMainController.model.available.store.name" md-search-text="stores_searchText" md-items="item in stores_storeSearch(stores_searchText)" md-item-text="item" md-require-match="md-require-match" placeholder="Select store" md-floating-label="Stores" amma-store-search="stores_storeSearch" required="true" flex=""><md-item-template><span md-highlight-text="stores_searchText">{{item}}</span></md-item-template><div ng-messages="ammaProductMainForm.stores.$error" md-auto-hide="false" ng-show="ammaProductMainForm.stores.$touched"><div ng-message="required">Please select stores</div></div></md-autocomplete><md-input-container flex=""><md-switch class="md-primary" ng-model="ammaProductFormMainController.model.available.store.availableToChildren" aria-label="Is Available to childer?" flex="">Is Available to sub stores?</md-switch></md-input-container></div><div layout="row" flex=""><md-input-container flex=""><label>User Groups</label><md-chips name="userGroup" md-autocomplete-snap="" ng-model="ammaProductFormMainController.model.available.userGroup" md-require-match="true" amma-cards-min-length="1"><md-autocomplete md-selected-item="userGroup_selectedItem" md-search-text="userGroup_searchText" md-items="item in userGroup_userGroupSearch(userGroup_searchText)" md-item-text="item" placeholder="Select user groups" amma-user-group-search="userGroup_userGroupSearch"><span md-highlight-text="userGroup_searchText">{{item}}</span></md-autocomplete><md-chip-template><span>{{$chip._id || $chip}}</span></md-chip-template></md-chips><div ng-messages="ammaProductMainForm.userGroup.$error" md-auto-hide="false" ng-show="ammaProductMainForm.userGroup.$touched"><div ng-message="amma-cards-min-length">Please select user groups</div></div></md-input-container></div></section><section><h3>Description</h3><div layout="row" flex=""><md-input-container flex="50"><label>Promo Text</label><input type="text" ng-model="ammaProductFormMainController.model.promoText" name="promoText"/></md-input-container></div><div layout="row" flex=""><md-input-container flex=""><label>Short Description</label><textarea ng-model="ammaProductFormMainController.model.shortDescription" rows="5" md-select-on-focus="" md-maxlength="150"></textarea></md-input-container></div><div layout="row" flex=""><md-input-container flex=""><label>Description</label><text-angular name="description" ng-model="ammaProductFormMainController.model.description" ta-target-toolbars="editor-toolbar"></text-angular></md-input-container></div></section></div><div class="amma-dialog-actions"><md-button class="md-primary md-raised" ng-click="ammaProductFormMainController.submit($event)" ng-disabled="ammaProductMainForm.$invalid" md-autofocus="">Save</md-button><md-button class="md-accent md-raised" ng-click="ammaProductFormMainController.submit($event, true)" ng-disabled="ammaProductMainForm.$invalid" md-autofocus="">Save and close</md-button><md-button class="md-warn md-raised" ng-click="ammaProductFormMainController.hide($event)">Cancel</md-button></div></form></md-content></md-tab-body></md-tab></ng-controller>