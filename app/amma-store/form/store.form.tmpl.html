<md-dialog aria-label="role form" ng-cloak flex>

    <form name="ammaStoreForm" novalidate flex="66">
        <md-toolbar>
            <div class="md-toolbar-tools">
                <h2 ng-if="ammaStoreFormController.isNew">Create Store</h2>
                <h2 ng-if="!ammaStoreFormController.isNew">Edit Store</h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="ammaStoreFormController.cancel()">
                    <md-icon md-font-icon="zmdi zmdi-close"></md-icon>
                </md-button>
            </div>
        </md-toolbar>
        <md-dialog-content>
            <div class="md-dialog-content" layout="column" flex>
                <section layout="column" flex>
                    <div layout="row" flex>

                        <md-input-container flex>
                            <label>Name</label>
                            <input type="text" ng-model="ammaStoreFormController.model._id" name="name"
                                   required ng-readonly="!ammaStoreFormController.isNew"/>
                            <div ng-messages="ammaStoreForm.name.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.name.$touched">
                                <div ng-message="required">
                                    Please enter name of the brand
                                </div>
                            </div>
                        </md-input-container>
                        <md-input-container flex>
                            <label>Title</label>
                            <input type="text" name="title"
                                   ng-model="ammaStoreFormController.model.title" required/>
                            <div ng-messages="ammaStoreForm.title.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.title.$touched">
                                <div ng-message="required">
                                    Please enter title
                                </div>
                            </div>
                        </md-input-container>

                    </div>
                    <div layout="row" flex>

                        <md-input-container flex>
                            <label>Email</label>
                            <input type="email" name="email" required
                                   ng-model="ammaStoreFormController.model.email"/>
                            <div ng-messages="ammaStoreForm.email.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.email.$touched">
                                <div ng-message="required">
                                    Please enter email
                                </div>
                                <div ng-message="email">
                                    Please enter valid email
                                </div>
                            </div>
                        </md-input-container>
                        <md-input-container flex>
                            <label>Contact Number</label>
                            <input type="text" name="contactNumber"
                                   ng-model="ammaStoreFormController.model.contactNumber" required/>
                            <div ng-messages="ammaStoreForm.contactNumber.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.contactNumber.$touched">
                                <div ng-message="required">
                                    Please enter contact number
                                </div>
                            </div>
                        </md-input-container>

                    </div>
                    <div layout="row" flex>

                        <md-input-container flex>
                            <label>Parent Store</label>
                            <md-select name="parent"
                                       ng-model="ammaStoreFormController.model.parent">
                                <md-option value=""></md-option>
                                <md-option ng-repeat="store in ammaStoreFormController.stores"
                                           ng-if="ammaStoreFormController.isNew || ammaStoreFormController.model._id != store._id"
                                           value="{{store._id}}">
                                    {{store.title}}
                                </md-option>
                            </md-select>
                            <div ng-messages="ammaStoreForm.parent.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.parent.$touched">
                            </div>

                        </md-input-container>
                        <md-input-container flex>
                            <label>URL</label>
                            <input type="url" name="website"
                                   ng-model="ammaStoreFormController.model.website"/>
                            <div ng-messages="ammaStoreForm.website.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.website.$touched">
                                <div ng-message="required">
                                    Please enter website
                                </div>
                                <div ng-message="url">
                                    Please enter valid url
                                </div>
                            </div>
                        </md-input-container>

                    </div>
                    <div layout="row">
                        <div layout="row" flex="50">
                            <label flex>Is Active?</label>
                            <md-switch class="md-primary margin-0"
                                       ng-model="ammaStoreFormController.model.isActive"
                                       aria-label="isLocked?" flex>
                            </md-switch>
                        </div>
                    </div>
                </section>
                <section flex layout="column">
                    <h2>Address</h2>
                    <div flex layout="row">
                        <md-input-container flex>
                            <label>Address Line 1</label>
                            <input type="text" name="addressLine1"
                                   ng-model="ammaStoreFormController.model.address.addressLine1"
                                   required/>
                            <div ng-messages="ammaStoreForm.addressLine1.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.addressLine1.$touched">
                                <div ng-message="required">
                                    Please enter address line 1
                                </div>
                            </div>
                        </md-input-container>
                        <md-input-container flex>
                            <label>Address Line 2</label>
                            <input type="text" name="addressLine2"
                                   ng-model="ammaStoreFormController.model.address.addressLine2"
                                   required/>
                            <div ng-messages="ammaStoreForm.addressLine2.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.addressLine2.$touched">
                                <div ng-message="required">
                                    Please enter address line 2
                                </div>
                            </div>
                        </md-input-container>
                    </div>

                    <div flex layout="row">
                        <md-input-container flex>
                            <label>Town</label>
                            <input type="text" name="town" required
                                   ng-model="ammaStoreFormController.model.address.town"/>
                            <div ng-messages="ammaStoreForm.town.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.town.$touched">
                                <div ng-message="required">
                                    Please enter town
                                </div>
                            </div>
                        </md-input-container>
                        <md-input-container flex>
                            <label>County</label>
                            <input type="text" name="county"
                                   ng-model="ammaStoreFormController.model.address.county"
                            />
                            <div ng-messages="ammaStoreForm.county.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.county.$touched">
                            </div>
                        </md-input-container>
                    </div>

                    <div flex layout="row">
                        <md-input-container flex>
                            <label>Country</label>
                            <input type="text" name="country"
                                   ng-model="ammaStoreFormController.model.address.country"
                                   required/>
                            <div ng-messages="ammaStoreForm.country.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.country.$touched">
                                <div ng-message="required">
                                    Please enter country
                                </div>
                            </div>
                        </md-input-container>
                        <md-input-container flex>
                            <label>Postcode</label>
                            <input type="text" name="postcode"
                                   ng-model="ammaStoreFormController.model.address.postcode"
                                   required/>
                            <div ng-messages="ammaStoreForm.postcode.$error" md-auto-hide="false"
                                 ng-show="ammaStoreForm.postcode.$touched">
                                <div ng-message="required">
                                    Please enter postcode
                                </div>
                            </div>
                        </md-input-container>
                    </div>
                </section>
                <section flex>
                    <h2>Upload</h2>
                    <md-input-container flex>
                        <lf-ng-md-file-input name="images" lf-files="ammaStoreFormController.model.internal.images"
                                             lf-maxcount="5" lf-filesize="10MB" lf-totalsize="20MB"
                                             lf-mimetype="image/*" multiple drag preview></lf-ng-md-file-input>
                        <div ng-messages="ammaStoreForm.images.$error" md-auto-hide="false"
                             ng-show="ammaStoreForm.images.$touched">
                            <div ng-message="required">This is required.</div>
                            <div ng-message="maxcount">Too much files.</div>
                            <div ng-message="filesize">File size too large.</div>
                            <div ng-message="totalsize">Total size too large.</div>
                            <div ng-message="mimetype">Mimetype error.</div>
                        </div>
                    </md-input-container>

                </section>
            </div>
        </md-dialog-content>

        <md-dialog-actions layout="row">
            <md-button class="md-primary md-raised" ng-click="ammaStoreFormController.submit($event)"
                       ng-disabled="ammaStoreForm.$invalid" md-autofocus>Save
            </md-button>
            <md-button class="md-warn md-raised" ng-click="ammaStoreFormController.cancel()">Cancel</md-button>
        </md-dialog-actions>
    </form>
</md-dialog>
